From bbc0a82b60afff3a87e060c5289979081d58708f Mon Sep 17 00:00:00 2001
From: Frank Schreiner <schreiner@suse.de>
Date: Thu, 14 Apr 2016 12:19:18 +0200
Subject: [PATCH] added switch to turn of python support

---
 CMakeLists.txt       | 2 ++
 src/CMakeLists.txt   | 2 ++
 tests/CMakeLists.txt | 2 ++
 3 files changed, 6 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index c4f06f8..8c78d6d 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -90,6 +90,8 @@ INCLUDE (${CMAKE_SOURCE_DIR}/VERSION.cmake)
 SET (VERSION "${CR_MAJOR}.${CR_MINOR}.${CR_PATCH}")
 message("Package version: ${VERSION}")
 
+# option to enable/disable python support
+OPTION (ENABLE_PYTHON "Enable python support?" ON)
 
 # Default python version
 if (NOT PYTHON_DESIRED)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 33ac9c8..f3635e8 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -120,4 +120,6 @@ INSTALL(TARGETS mergerepo_c DESTINATION bin/)
 INSTALL(TARGETS modifyrepo_c DESTINATION bin/)
 INSTALL(TARGETS sqliterepo_c DESTINATION bin/)
 
+IF (ENABLE_PYTHON)
 ADD_SUBDIRECTORY(python)
+ENDIF (ENABLE_PYTHON)
diff --git a/tests/CMakeLists.txt b/tests/CMakeLists.txt
index d61bb86..aeefe59 100644
--- a/tests/CMakeLists.txt
+++ b/tests/CMakeLists.txt
@@ -37,4 +37,6 @@ ADD_DEPENDENCIES(tests test_xml_parser_updateinfo)
 CONFIGURE_FILE("run_gtester.sh.in"  "${CMAKE_BINARY_DIR}/tests/run_gtester.sh")
 ADD_TEST(test_main run_gtester.sh)
 
+IF (ENABLE_PYTHON)
 ADD_SUBDIRECTORY(python)
+ENDIF (ENABLE_PYTHON)
-- 
2.14.2

